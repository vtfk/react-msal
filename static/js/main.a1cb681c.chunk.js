(this["webpackJsonpreact-msal-example"]=this["webpackJsonpreact-msal-example"]||[]).push([[0],{13:function(e,t,n){e.exports=n(38)},14:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);n(14);var o=n(0),r=n.n(o),i=n(11),c=n.n(i),u=n(2),a=n.n(u),s=n(12);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function d(e,t){try{var n=e()}catch(o){return t(o)}return n&&n.then?n.then(void 0,t):n}function f(e,t){try{var n=e()}catch(o){return t(!0,o)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}var S={auth:{clientId:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_CLIENT_ID,authority:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_AUTHORITY,redirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_REDIRECT_URL,postLogoutRedirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_POST_LOGOUT_URL||"https://vtfk.no"},cache:{cacheLocation:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_CACHE_LOCATION||"sessionStorage",storeAuthStateInCookie:"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_STATE_IN_COOKIE||!1},userInfoUrl:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_USER_INFO_URL||"https://graph.microsoft.com/v1.0/me?$select=userPrincipalName,onPremisesSamaccountName,givenName,surname,displayName",isMock:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_IS_MOCK||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_IS_MOCK||!1,mockUser:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_MOCK_USER?JSON.parse(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_MOCK_USER):{displayName:"Trine Testesen",givenName:"Trine",name:"Trine Testesen",onPremisesSamAccountName:"tri0308",surname:"Testesen",tenantId:"08f3813c-9f29-482f-9aec-16ef7cbf477a",userPrincipalName:"trine.testesen@vtfk.no",username:"trine.testesen@vtfk.no"}},T=r.a.createContext(),v=function(){return Object(o.useContext)(T)},m=function(e){var t=function(e){try{return console.log("updateToken"),y?Promise.resolve(y.acquireTokenSilent(l({account:e.username},h))).then((function(t){return Promise.resolve(n(t,e)).then((function(){}))})):Promise.resolve(!1)}catch(t){return Promise.reject(t)}},n=function(e,t){try{console.log("saveUserdata");var n=e.accessToken,o=e.idToken,r=new Date(e.expiresOn).getTime();return Promise.resolve(i(n,t)).then((function(e){var t=n&&r>(new Date).getTime();b({isAuthenticated:t,user:e,token:n,idToken:o,expires:r,authStatus:"finished"})}))}catch(c){return Promise.reject(c)}},i=function(e,t){try{return console.log("updateUserInfo"),Promise.resolve(z(e)).then((function(e){return l({},t,e)}))}catch(n){return Promise.reject(n)}},c=e.children,u=e.config,v=e.scopes,m=u.isMock||S.isMock,_=u.mockUser||S.mockUser,O=u.userInfoUrl||S.userInfoUrl,h=v||u.scopes||S.scopes,g=u.auth.postLogoutRedirectUri||S.auth.postLogoutRedirectUri,E=window.navigator.userAgent,p=E.indexOf("MSIE "),P=E.indexOf("Trident/"),C=E.indexOf("Edge/"),U=p>0||P>0,A=C>0,D=function(e,t,n){var r=void 0===n?{}:n,i=r.serialize,c=void 0===i?JSON.stringify:i,u=r.deserialize,a=void 0===u?JSON.parse:u,s=Object(o.useState)((function(){var n=window.sessionStorage.getItem(e);return n?a(n):"function"===typeof t?t():t||""})),l=s[0],d=s[1],f=Object(o.useRef)(e);return Object(o.useEffect)((function(){var t=f.current;t!==e&&window.sessionStorage.removeItem(t),f.current=e,window.sessionStorage.setItem(e,c(l))}),[e,l,c]),[l,d]}("MSAL-AUTH",{isAuthenticated:m,user:!1,token:!1,idToken:!1,expires:(new Date).getTime(),authStatus:"unknown"}),R=D[0],b=D[1],k=Object(o.useState)(),y=k[0],I=k[1],L=Object(o.useState)(!1),H=L[0],K=L[1],N=Object(o.useState)(!1),W=N[0],j=N[1],w=R.isAuthenticated,B=R.user,x=R.token,M=R.idToken,V=R.expires,q=R.authStatus,z=function(e){try{return console.log("getUserInfo"),a.a.defaults.headers.common.Authorization="Bearer "+e,Promise.resolve(d((function(){return Promise.resolve(a.a.get(O)).then((function(e){return e.data}))}),(function(e){return console.error(e),{}})))}catch(t){return Promise.reject(t)}};Object(o.useEffect)((function(){if(console.log("ue-!mock"),!m){var e=new s.a(u||S);I(e);var o=l({},R);if(b(l({},o,{authStatus:"pending"})),e.handleRedirectPromise().then((function(t){if(t){var o=e.getAllAccounts()[0];n(t,o)}else{var r=l({},R);b(l({},r,{authStatus:"finished"}))}})).catch((function(e){var t=l({},R);b(l({},t,{authStatus:"rejected"})),console.log(e),j(e)})),e.getAllAccounts().length>0){var r=e.getAllAccounts()[0],i=l({},R);if(b(l({},i,{authStatus:"pending"})),x){var c=l({},R);b(l({},c,{isAuthenticated:x&&V>(new Date).getTime(),authStatus:"finished"}))}else t(r)}}}),[]),Object(o.useEffect)((function(){if(console.log("ue-mock"),m){var e=new Date;e.setDate(e.getDate()+24),b({isAuthenticated:!0,user:_,token:"12345",idToken:"67890",expires:e.getTime(),authStatus:"finished"}),console.log("Running in mock modus")}}),[]);var J=function(e){try{return function(e,t){return e&&t>(new Date).getTime()}(M,V)?(a.a.defaults.headers.common.Authorization="Bearer "+M,Promise.resolve(d((function(){return Promise.resolve(e()).then((function(e){return e.data}))}),(function(n){return function(e){return/401/.test(e.message)}(n)?Promise.resolve(t(B)).then((function(){return a.a.defaults.headers.common.Authorization="Bearer "+M,d((function(){return Promise.resolve(e()).then((function(e){return e.data}))}),(function(e){return console.error(e),!1}))})):(console.error(n),!1)})))):(console.warn("invalid token or expire"),Promise.resolve(t(B)).then((function(){return e()})))}catch(n){return Promise.reject(n)}};return r.a.createElement(T.Provider,{value:{isAuthenticated:w,authStatus:q,user:B,token:x,idToken:M,popupOpen:H,loginError:W,login:function(e,n){void 0===n&&(n="loginRedirect");try{if(console.log("login"),!y)return Promise.resolve(null);var o=U||A?"loginRedirect":n,r=function(){if("loginPopup"===o){K(!0);var n=f((function(){return d((function(){var n=l({},R);return b(l({},n,{authStatus:"pending"})),Promise.resolve(y.loginPopup(e)).then((function(){y.getAccount()&&t(y.getAccount())}))}),(function(e){console.log(e),j(e)}))}),(function(e,t){if(K(!1),e)throw t;return t}));if(n&&n.then)return n.then((function(){}))}else if("loginRedirect"===o){var r=l({},R);b(l({},r,{authStatus:"pending"})),y.loginRedirect(e)}}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(i){return Promise.reject(i)}},logout:function(){console.log("logout"),window.sessionStorage.removeItem("MSAL-AUTH");var e=y.getAccountByHomeId(B.homeAccountId)||void 0;y.logout({account:e,postLogoutRedirectUri:g})},getToken:function(e,t){try{return console.log("getToken"),"loginRedirect"===(U||A?"loginRedirect":t)?Promise.resolve(function(e){try{console.log("getTokenRedirect");var t=l({},R);b(l({},t,{authStatus:"pending"}));var n=d((function(){return Promise.resolve(y.acquireTokenSilent(e)).then((function(e){b(l({},t,{token:e}))}))}),(function(){try{var t=l({},R);b(l({},t,{authStatus:"pending"})),y.acquireTokenRedirect(e)}catch(n){console.error(n),j(n)}}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(o){return Promise.reject(o)}}(e)):Promise.resolve(function(e){try{console.log("getTokenPopup");var t=d((function(){return Promise.resolve(y.acquireTokenSilent(e)).then((function(e){n(e.accessToken,B)}))}),(function(){var t=f((function(){return d((function(){return K(!0),Promise.resolve(y.acquireTokenPopup(e)).then((function(e){n(e.accessToken,B)}))}),(function(e){console.log(e),j(e)}))}),(function(e,t){if(K(!1),e)throw t;return t}));return t&&t.then?t.then((function(){})):void 0}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(o){return Promise.reject(o)}}(e))}catch(o){return Promise.reject(o)}},apiGet:function(e){return J((function(){return a.a.get(e)}))},apiPost:function(e,t){return J((function(){return a.a.post(e,t)}))},apiPut:function(e,t){return J((function(){return a.a.put(e,t)}))}}},c)},_={auth:{clientId:"58e282d0-b89b-4d06-b188-a3761389c33d",authority:"https://login.microsoftonline.com/08f3813c-9f29-482f-9aec-16ef7cbf477a",redirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_REDIRECT_URL||"https://vtfk.github.io/react-msal/",postLogoutRedirectUri:"https://github.com/vtfk/react-msal"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}},O={scopes:["openid","profile","User.Read"],forceRefresh:!0},h=function(){var e=v(),t=e.user,n=e.logout;return r.a.createElement(r.a.Fragment,null,r.a.createElement("code",null,"Hi there, ",t.givenName,"! ",r.a.createElement("span",{role:"img","aria-label":"waving hand emoji"},"\ud83d\udc4b"),r.a.createElement("br",null),"Here is you MSAL user object:"),function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return r.a.createElement("table",null,r.a.createElement("tbody",null,t&&t.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null,e.key),r.a.createElement("td",null,e.value))}))))}(t),r.a.createElement("button",{onClick:function(){return n()}},"Log out!"))},g=function(){var e=v(),t=e.isAuthenticated,n=e.login,o=e.authStatus;return["pending"].includes(o)?r.a.createElement("div",null,"Loading..."):t?t&&"finished"===o?r.a.createElement(h,null):void 0:(console.log("app-!isAuth"),n(O,"loginRedirect"),r.a.createElement(r.a.Fragment,null))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m,{config:_,scopes:O},r.a.createElement(g,null))),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.a1cb681c.chunk.js.map
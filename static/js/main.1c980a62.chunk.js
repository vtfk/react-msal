(this["webpackJsonpreact-msal-example"]=this["webpackJsonpreact-msal-example"]||[]).push([[0],{17:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(0),r=(n(17),n(1)),i=n.n(r),c=n(13),u=n.n(c),s=n(3),a=n.n(s),d=n(14);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function f(e,t){try{var n=e()}catch(o){return t(o)}return n&&n.then?n.then(void 0,t):n}function l(e,t){try{var n=e()}catch(o){return t(!0,o)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}var T={auth:{clientId:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_CLIENT_ID,authority:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_AUTHORITY,redirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_REDIRECT_URL,postLogoutRedirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_POST_LOGOUT_URL||"https://vtfk.no"},cache:{cacheLocation:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_CACHE_LOCATION||"sessionStorage",storeAuthStateInCookie:"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_STATE_IN_COOKIE||!1},userInfoUrl:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_USER_INFO_URL||"https://graph.microsoft.com/v1.0/me?$select=userPrincipalName,onPremisesSamaccountName,givenName,surname,displayName",isMock:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_IS_MOCK||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IS_MOCK||!1,mockUser:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_MOCK_USER?JSON.parse(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_MOCK_USER):{displayName:"Trine Testesen",givenName:"Trine",name:"Trine Testesen",onPremisesSamAccountName:"tri0308",surname:"Testesen",tenantId:"08f3813c-9f29-482f-9aec-16ef7cbf477a",userPrincipalName:"trine.testesen@vtfk.no",username:"trine.testesen@vtfk.no"}},_=i.a.createContext(),O=function(){return Object(r.useContext)(_)},v=function(e){var t=function(e){try{return k?Promise.resolve(k.acquireTokenSilent(S({account:e.username},m))).then((function(t){return Promise.resolve(n(t,e)).then((function(){}))})):Promise.resolve(!1)}catch(t){return Promise.reject(t)}},n=function(e,t){try{var n=e.accessToken,r=e.idToken,i=new Date(e.expiresOn).getTime();return Promise.resolve(o(n,t)).then((function(e){var t=n&&i>(new Date).getTime();U({isAuthenticated:t,user:e,token:n,idToken:r,expires:i,authStatus:"finished"})}))}catch(c){return Promise.reject(c)}},o=function(e,t){try{return Promise.resolve(z(e)).then((function(e){return S({},t,e)}))}catch(n){return Promise.reject(n)}},c=e.children,u=e.config,s=e.scopes,O=u.isMock||T.isMock,v=u.mockUser||T.mockUser,h=u.userInfoUrl||T.userInfoUrl,m=s||u.scopes||T.scopes,E=u.auth.postLogoutRedirectUri||T.auth.postLogoutRedirectUri,p=window.navigator.userAgent,g=p.indexOf("MSIE "),P=p.indexOf("Trident/"),R=p.indexOf("Edge/"),A=g>0||P>0,b=R>0,j="MSAL-AUTH",C=function(e,t,n){var o=void 0===n?{}:n,i=o.serialize,c=void 0===i?JSON.stringify:i,u=o.deserialize,s=void 0===u?JSON.parse:u,a=Object(r.useState)((function(){var n=window.sessionStorage.getItem(e);return n?s(n):"function"===typeof t?t():t||""})),d=a[0],S=a[1],f=Object(r.useRef)(e);return Object(r.useEffect)((function(){var t=f.current;t!==e&&window.sessionStorage.removeItem(t),f.current=e,window.sessionStorage.setItem(e,c(d))}),[e,d,c]),[d,S]}(j,{isAuthenticated:O,user:!1,token:!1,idToken:!1,expires:(new Date).getTime(),authStatus:"unknown"}),D=C[0],U=C[1],H=Object(r.useState)(),k=H[0],I=H[1],y=Object(r.useState)(!1),L=y[0],K=y[1],N=Object(r.useState)(!1),W=N[0],w=N[1],x=D.isAuthenticated,F=D.user,B=D.token,V=D.idToken,M=D.expires,q=D.authStatus,z=function(e){try{return a.a.defaults.headers.common.Authorization="Bearer "+e,Promise.resolve(f((function(){return Promise.resolve(a.a.get(h)).then((function(e){return e.data}))}),(function(e){return console.error(e),{}})))}catch(t){return Promise.reject(t)}};Object(r.useEffect)((function(){if(!O){var e=new d.a(u||T);I(e);var o=S({},D);if(U(S({},o,{authStatus:"pending"})),e.handleRedirectPromise().then((function(t){if(t){var o=e.getAllAccounts()[0];n(t,o)}else{var r=S({},D);U(S({},r,{authStatus:"finished"}))}})).catch((function(e){var t=S({},D);U(S({},t,{authStatus:"rejected"})),console.error(e),w(e)})),e.getAllAccounts().length>0){var r=e.getAllAccounts()[0],i=S({},D);if(U(S({},i,{authStatus:"pending"})),B){var c=S({},D);U(S({},c,{isAuthenticated:B&&M>(new Date).getTime(),authStatus:"finished"}))}else t(r)}}}),[]),Object(r.useEffect)((function(){if(O){var e=new Date;e.setDate(e.getDate()+24),U({isAuthenticated:!0,user:v,token:"12345",idToken:"67890",expires:e.getTime(),authStatus:"finished"}),console.log("Running in mock modus")}}),[]);var J=function(e){try{return function(e,t){return e&&t>(new Date).getTime()}(V,M)?(a.a.defaults.headers.common.Authorization="Bearer "+V,Promise.resolve(f((function(){return Promise.resolve(e()).then((function(e){return e.data}))}),(function(n){return function(e){return/401/.test(e.message)}(n)?Promise.resolve(t(F)).then((function(){return a.a.defaults.headers.common.Authorization="Bearer "+V,f((function(){return Promise.resolve(e()).then((function(e){return e.data}))}),(function(e){return console.error(e),!1}))})):(console.error(n),!1)})))):(console.warn("invalid token or expire"),Promise.resolve(t(F)).then((function(){return e()})))}catch(n){return Promise.reject(n)}};return i.a.createElement(_.Provider,{value:{isAuthenticated:x,authStatus:q,user:F,token:B,idToken:V,popupOpen:L,loginError:W,login:function(e,n){void 0===n&&(n="loginRedirect");try{if(!k)return Promise.resolve(null);var o=A||b?"loginRedirect":n,r=function(){if("loginPopup"===o){K(!0);var n=l((function(){return f((function(){var n=S({},D);return U(S({},n,{authStatus:"pending"})),Promise.resolve(k.loginPopup(e)).then((function(){k.getAccount()&&t(k.getAccount())}))}),(function(e){console.error(e),w(e)}))}),(function(e,t){if(K(!1),e)throw t;return t}));if(n&&n.then)return n.then((function(){}))}else if("loginRedirect"===o){var r=S({},D);U(S({},r,{authStatus:"pending"})),k.loginRedirect(e)}}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(i){return Promise.reject(i)}},logout:function(){if(O)return console.log("mock logout"),window.sessionStorage.clear(),void window.location.replace(E);window.sessionStorage.removeItem(j);var e=F.homeAccountId?k.getAccountByHomeId(F.homeAccountId):void 0;k.logout({account:e,postLogoutRedirectUri:E})},getToken:function(e,t){return"loginRedirect"===(A||b?"loginRedirect":t)?Promise.resolve(function(e){try{var t=S({},D);U(S({},t,{authStatus:"pending"}));var n=f((function(){return Promise.resolve(k.acquireTokenSilent(e)).then((function(e){U(S({},t,{token:e}))}))}),(function(){try{var t=S({},D);U(S({},t,{authStatus:"pending"})),k.acquireTokenRedirect(e)}catch(n){console.error(n),w(n)}}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(o){return Promise.reject(o)}}(e)):Promise.resolve(function(e){try{var t=f((function(){return Promise.resolve(k.acquireTokenSilent(e)).then((function(e){n(e.accessToken,F)}))}),(function(){var t=l((function(){return f((function(){return K(!0),Promise.resolve(k.acquireTokenPopup(e)).then((function(e){n(e.accessToken,F)}))}),(function(e){console.log(e),w(e)}))}),(function(e,t){if(K(!1),e)throw t;return t}));return t&&t.then?t.then((function(){})):void 0}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(o){return Promise.reject(o)}}(e))},apiGet:function(e){return J((function(){return a.a.get(e)}))},apiPost:function(e,t){return J((function(){return a.a.post(e,t)}))},apiPut:function(e,t){return J((function(){return a.a.put(e,t)}))}}},c)},h={auth:{clientId:"58e282d0-b89b-4d06-b188-a3761389c33d",authority:"https://login.microsoftonline.com/08f3813c-9f29-482f-9aec-16ef7cbf477a",redirectUri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).AUTH_REDIRECT_URL||"https://vtfk.github.io/react-msal/",postLogoutRedirectUri:"https://github.com/vtfk/react-msal"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}},m={scopes:["openid","profile","User.Read"],forceRefresh:!0},E=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:t&&t.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.key}),Object(o.jsx)("td",{children:e.value})]},e.key)}))})})},p=function(){var e=O(),t=e.user,n=e.logout;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("code",{children:["Hi there, ",t.givenName,"! ",Object(o.jsx)("span",{role:"img","aria-label":"waving hand emoji",children:"\ud83d\udc4b"}),Object(o.jsx)("br",{}),"Here is you MSAL user object:"]}),E(t),Object(o.jsx)("button",{onClick:function(){return n()},children:"Log out!"})]})},g=function(){var e=O(),t=e.isAuthenticated,n=e.login,r=e.authStatus;return["pending"].includes(r)?Object(o.jsx)("div",{children:"Loading..."}):t?t&&"finished"===r?Object(o.jsx)(p,{}):void 0:(console.log("app-!isAuth"),n(m,"loginRedirect"),Object(o.jsx)(o.Fragment,{}))};u.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(v,{config:h,scopes:m,children:Object(o.jsx)(g,{})})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.1c980a62.chunk.js.map